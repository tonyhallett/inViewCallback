!function(r){var i=0;r.widget("tonyhallett.inviewcallback",{options:{inView:function(){},initialInView:!0},_isOnScreen:function(t){var i=r(window),e={top:i.scrollTop(),left:i.scrollLeft()};e.right=e.left+i.width(),e.bottom=e.top+i.height();var n=t.offset();return n.right=n.left+t.outerWidth(),n.bottom=n.top+t.outerHeight(),!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom)},_callbackCount:0,_widgetId:0,_offScreen:!0,_triggerView:function(t){this._trigger(t?"inView":"outOfView",null,{count:this._callbackCount})},_triggerInView:function(){this._triggerView(!0)},_triggerOutOfView:function(){this._triggerView(!1)},_reachedLimit:function(){return void 0!==this.options.numTimes&&this._callbackCount>=this.options.numTimes},_elementOnScreen:function(){return this._isOnScreen(this.element)},_testAndCallback:function(t){var i=!1,e=this._offScreen,n=this._elementOnScreen();return this._offScreen=!n,t?n?(this._callbackCount++,this._triggerInView()):(this._triggerOutOfView(),i=this._reachedLimit()):e&&n?(this._callbackCount++,this._triggerInView()):e||n||(this._triggerOutOfView(),i=this._reachedLimit()),i},_destroy:function(){this._removeScrollHandler()},_getScrollHandlerEventType:function(){return"scroll.inviewcallback."+this._widgetId},_addScrollHandler:function(){var t=this;r(window).on(this._getScrollHandlerEventType(),function(){t._testAndCallback()&&t._removeScrollHandler()})},_removeScrollHandler:function(){r(window).off(this._getScrollHandlerEventType())},_create:function(){this._widgetId=i++;var t=void 0===this.options.numTimes||0<this.options.numTimes;this.options.initialInView&&t?t=!this._testAndCallback(!0):(this._offScreen=!this._elementOnScreen(),this._offScreen&&t&&this._triggerOutOfView()),t&&this._addScrollHandler()},_setOption:function(t,i){this._super(t,i),"numTimes"===t&&(this._removeScrollHandler(),this._reachedLimit()||this._addScrollHandler())}})}(jQuery);